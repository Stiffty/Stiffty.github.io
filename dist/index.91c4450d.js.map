{"mappings":"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","sources":["src/js/Title/Constraint.js","src/js/Title/Point.js","src/js/Title/Square.js","src/js/Title/Cloth.js","src/js/script.js"],"sourcesContent":["var Constraint = function (p1, p2,spacing) {\r\n    this.p1 = p1;\r\n    this.p2 = p2;\r\n    this.length = spacing;\r\n};\r\n\r\nConstraint.prototype.resolve = function (tear_distance) {\r\n    var diff_x = this.p1.x - this.p2.x,\r\n        diff_y = this.p1.y - this.p2.y,\r\n        dist = Math.sqrt(diff_x * diff_x + diff_y * diff_y)\r\n\r\n    if (dist > tear_distance) this.p1.remove_constraint(this);\r\n\r\n    var diff = (this.length - dist) / dist;\r\n\r\n\r\n\r\n    var px = diff_x * diff * 0.5;\r\n    var py = diff_y * diff * 0.5;\r\n\r\n    this.p1.x += px;\r\n    this.p1.y += py;\r\n    this.p2.x -= px;\r\n    this.p2.y -= py;\r\n};\r\n\r\nConstraint.prototype.draw = function (ctx) {\r\n\r\n    ctx.moveTo(this.p1.x, this.p1.y);\r\n    ctx.lineTo(this.p2.x, this.p2.y);\r\n\r\n};\r\n\r\nexport {Constraint};","import { Constraint as Constraint } from \"./Constraint.js\";\r\n\r\nvar Point = function (x, y) {\r\n    this.x      = x;\r\n    this.y      = y;\r\n    this.px     = x;\r\n    this.py     = y;\r\n    this.vx     = 0;\r\n    this.vy     = 0;\r\n    this.pin_x  = null;\r\n    this.pin_y  = null;\r\n    \r\n    this.constraints = [];\r\n    this.constraintUp = null;\r\n    this.constraintLeft = null;\r\n};\r\n\r\nPoint.prototype.update = function (delta,mouse,mouse_cut,mouse_influence,gravity) {\r\n    if (mouse.down) {\r\n        var diff_x = this.x - mouse.x,\r\n            diff_y = this.y - mouse.y,\r\n            dist = Math.sqrt(diff_x * diff_x + diff_y * diff_y);\r\n\r\n        if (mouse.button == 1) {\r\n            if (dist < mouse_influence) {\r\n                this.px = this.x - (mouse.x - mouse.px) * 1.8;\r\n                this.py = this.y - (mouse.y - mouse.py) * 1.8;\r\n            }\r\n          \r\n        } else if (dist < mouse_cut) this.constraints = [];\r\n    }\r\n\r\n    this.add_force(0, gravity);\r\n\r\n    delta *= delta;\r\n    var nx = this.x + ((this.x - this.px) * .99) + ((this.vx / 2) * delta);\r\n    var ny = this.y + ((this.y - this.py) * .99) + ((this.vy / 2) * delta);\r\n\r\n    this.px = this.x;\r\n    this.py = this.y;\r\n\r\n    this.x = nx;\r\n    this.y = ny;\r\n\r\n    this.vy = this.vx = 0\r\n};\r\n\r\nPoint.prototype.draw = function (ctx) {\r\n    if (!this.constraints.length) return;\r\n\r\n    var i = this.constraints.length;\r\n    while (i--) this.constraints[i].draw(ctx);\r\n};\r\n\r\nPoint.prototype.resolve_constraints = function (tear_distance,boundsx,boundsy) {\r\n    if (this.pin_x != null && this.pin_y != null) {\r\n        this.x = this.pin_x;\r\n        this.y = this.pin_y;\r\n        return;\r\n    }\r\n\r\n    var i = this.constraints.length;\r\n  while (i--) this.constraints[i].resolve(tear_distance);\r\n\r\n    this.x > boundsx ? this.x = 2 * boundsx - this.x : 1 > this.x && (this.x = 2 - this.x);\r\n    this.y < 1 ? this.y = 2 - this.y : this.y > boundsy && (this.y = 2 * boundsy - this.y);\r\n};\r\n\r\nPoint.prototype.attach = function (point,direction,spacing) {\r\n      var con = new Constraint(this, point,spacing);\r\n\r\n      if(direction == 0)\r\n          this.constraintUp =  this.constraints.length;\r\n      else \r\n          this.constraintLeft = this.constraints.length;\r\n\r\n      this.constraints.push(con);\r\n};\r\n\r\nPoint.prototype.remove_constraint = function (constraint) {\r\n    this.constraints.splice(this.constraints.indexOf(constraint), 1);\r\n};\r\n\r\nPoint.prototype.add_force = function (x, y) {\r\n    this.vx += x;\r\n    this.vy += y;\r\n  \r\n    var round = 400;\r\n    this.vx = ~~(this.vx * round) / round;\r\n    this.vy = ~~(this.vy * round) / round;\r\n};\r\n\r\nPoint.prototype.pin = function (pinx, piny) {\r\n    this.pin_x = pinx;\r\n    this.pin_y = piny;\r\n};\r\n\r\nexport {Point};\r\n","var Square = function (p1, p2, p3, p4) {\r\n\r\n    //p4  p3\r\n    //p1  p2\r\n    this.p1 = p1;\r\n    this.p2 = p2;\r\n    this.p3 = p3;\r\n    this.p4 = p4;\r\n}\r\n\r\nSquare.prototype.draw = function (ctx) {\r\n\r\n    \r\n    ctx.moveTo(this.p4.x, this.p4.y);\r\n    ctx.lineTo(this.p3.x, this.p3.y);\r\n    ctx.lineTo(this.p2.x, this.p2.y);\r\n    ctx.lineTo(this.p1.x, this.p1.y);\r\n    ctx.lineTo(this.p4.x, this.p4.y);\r\n}\r\n\r\nexport {Square};","import {Point as Point} from \"./Point.js\";\r\nimport { Square as Square } from \"./Square.js\";\r\n\r\nvar Cloth = function (canvas,cloth_width,cloth_height,spacing,start_y) {\r\n    this.points = [];\r\n    this.squares = [];\r\n    this.squareLines = [];\r\n\r\n    var start_x = canvas.width / 2 - cloth_width * spacing / 2;\r\n\r\n    for (var y = 0; y <= cloth_height; y++) {\r\n        for (var x = 0; x <= cloth_width; x++) {\r\n            var p = new Point(start_x + x * spacing, start_y + y * spacing);\r\n\r\n            x != 0 && p.attach(this.points[this.points.length - 1], 1,spacing);\r\n            y == 0 && p.pin(p.x, p.y);\r\n            y != 0 && p.attach(this.points[x + (y - 1) * (cloth_width + 1)], 0,spacing)\r\n\r\n            //4  3\r\n            //1  2\r\n\r\n            if (x != 0 && y != 0) {\r\n                var s = new Square(this.points[this.points.length - 1], p, this.points[x + (y - 1) * (cloth_width + 1)], this.points[(x - 1) + (y - 1) * (cloth_width + 1)]);\r\n                this.squares.push(s);\r\n            }\r\n            this.points.push(p);\r\n        }\r\n    }\r\n};\r\n\r\nCloth.prototype.update = function (tear_distance,physics_accuracy,mouse,mouse_cut,mouse_influence,gravity,boundsx,boundsy) {\r\n    var i = physics_accuracy;\r\n\r\n    while (i--) {\r\n        var p = this.points.length;\r\n        while (p--) this.points[p].resolve_constraints(tear_distance,boundsx,boundsy);\r\n    }\r\n\r\n    i = this.points.length;\r\n    while (i--) this.points[i].update(.016,mouse,mouse_cut,mouse_influence,gravity);\r\n};\r\n\r\n\r\nCloth.prototype.draw = function (ctx) {\r\n    ctx.beginPath();\r\n    \r\n    var i = this.squares.length;\r\n    while (i--) {\r\n        let square = this.squares[i];\r\n\r\n        if(square === null)\r\n            continue;\r\n            \r\n        if (square.p2.constraints.length != 2 || square.p3.constraints[square.p3.constraintLeft] == null || square.p1.constraints[square.p1.constraintUp] == null){\r\n            this.squareLines.push(square);\r\n            this.squares[i] = null;\r\n            continue;\r\n        }\r\n\r\n        square.draw(ctx);\r\n    }\r\n    ctx.fill();\r\n};\r\n\r\nCloth.prototype.drawLines = function (ctx) {\r\n    ctx.beginPath();\r\n\r\n    var i = this.points.length;\r\n    while (i--){\r\n        this.points[i].draw(ctx);\r\n    }\r\n\r\n    ctx.stroke();\r\n};\r\n\r\n\r\nexport {Cloth};","import { Cloth as Cloth } from \"./Title/Cloth.js\"\r\n// settings\r\n\r\nvar physics_accuracy = 10,\r\n    mouse_influence = 10,\r\n    mouse_cut = 5,\r\n    gravity = 1200,\r\n    cloth_height = 18,\r\n    cloth_width = 86,\r\n    start_y = 20,\r\n    spacing = 5,\r\n    tear_distance = 20,\r\n    text = \"STIFFTY\",\r\n    bloom = 10\r\n\r\n\r\nwindow.requestAnimFrame =\r\n    window.requestAnimationFrame ||\r\n    window.webkitRequestAnimationFrame ||\r\n    window.mozRequestAnimationFrame ||\r\n    window.oRequestAnimationFrame ||\r\n    window.msRequestAnimationFrame ||\r\n    function (callback) {\r\n        window.setTimeout(callback, 1000 / 60);\r\n    };\r\n\r\nvar canvas,\r\n    ctx,\r\n    cloth,\r\n    boundsx,\r\n    boundsy,\r\n    mouse = {\r\n        down: false,\r\n        button: 1,\r\n        x: 0,\r\n        y: 0,\r\n        px: 0,\r\n        py: 0\r\n    };\r\n\r\n\r\nfunction getPositionsForText(cloth) {\r\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n    let fontSize = cloth_height*spacing+start_y/2;\r\n    ctx.font = \"bold \"+fontSize + \"px serif\";\r\n\r\n    let textWidth = ctx.measureText(text);\r\n    let textPos = (canvas.width / 2) - (textWidth.width / 2);\r\n    ctx.fillText(text, textPos, cloth_height*spacing+start_y/2);\r\n\r\n    // get a Uint32 representation of the bitmap:\r\n    let data32 = new Uint32Array(ctx.getImageData(0, 0, canvas.width, canvas.height).data.buffer);\r\n\r\n    let approvedSquares = [];\r\n\r\n    // loop through each pixel. We will only store the ones with alpha = 255\r\n    let length = data32.length;\r\n    for (let i = 0; i < length; i++) {\r\n        if (data32[i] & 0xff000000) {\r\n\r\n            let sqLength = cloth.squares.length;\r\n            for (let j = 0; j < sqLength; j++) {\r\n                var sq = cloth.squares[j];\r\n\r\n\r\n                if (sq.p2.x == i % canvas.width && sq.p2.y == ((i / canvas.width) | 0)) {\r\n                    approvedSquares.push(cloth.squares[j]);\r\n                }\r\n            }\r\n\r\n            ctx.fillRect(i % canvas.width, ((i / canvas.width) | 0), 1, 1);\r\n        }\r\n    }\r\n\r\n    length = cloth.squares.length;\r\n\r\n    for (let index = 0; index < length; index++) {\r\n        if (approvedSquares.indexOf(cloth.squares[index]) === -1)\r\n            cloth.squareLines.push(cloth.squares[index]);\r\n    }\r\n\r\n    cloth.squares = approvedSquares;\r\n}\r\n\r\n\r\nfunction update() {\r\n\r\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n\r\n    cloth.update(tear_distance, physics_accuracy, mouse, mouse_cut, mouse_influence, gravity, boundsx, boundsy);\r\n\r\n\r\n    let rand = Math.random() * 10;\r\n\r\n\r\n    ctx.shadowBlur = bloom + rand;\r\n    ctx.shadowColor = \"white\";\r\n    cloth.draw(ctx);\r\n\r\n\r\n\r\n    ctx.shadowBlur = 0;\r\n    cloth.drawLines(ctx);\r\n\r\n\r\n    requestAnimFrame(update);\r\n}\r\n\r\nfunction start() {\r\n\r\n    //Mouse events\r\n    canvas.onmousedown = function (e) {\r\n        mouse.button = e.which;\r\n        mouse.px = mouse.x;\r\n        mouse.py = mouse.y;\r\n        var rect = canvas.getBoundingClientRect();\r\n        mouse.x = e.clientX - rect.left,\r\n            mouse.y = e.clientY - rect.top,\r\n            mouse.down = true;\r\n        e.preventDefault();\r\n    };\r\n\r\n    canvas.onmouseup = function (e) {\r\n        mouse.down = false;\r\n        e.preventDefault();\r\n    };\r\n\r\n    canvas.onmousemove = function (e) {\r\n        mouse.px = mouse.x;\r\n        mouse.py = mouse.y;\r\n        var rect = canvas.getBoundingClientRect();\r\n        mouse.x = e.clientX - rect.left,\r\n            mouse.y = e.clientY - rect.top,\r\n            e.preventDefault();\r\n    };\r\n\r\n    canvas.oncontextmenu = function (e) {\r\n        e.preventDefault();\r\n    };\r\n\r\n    canvas.onmouseout = function (e) {\r\n        mouse.down = false;\r\n        e.preventDefault();\r\n    }\r\n\r\n    //Touch events\r\n\r\n    canvas.ontouchstart = function (e) {\r\n        mouse.button = 1;\r\n        mouse.px = mouse.x;\r\n        mouse.py = mouse.y;\r\n        var rect = canvas.getBoundingClientRect();\r\n        mouse.x = e.touches[0].clientX - rect.left,\r\n            mouse.y = e.touches[0].clientY - rect.top,\r\n            mouse.down = true;\r\n        e.preventDefault();\r\n    };\r\n\r\n    canvas.ontouchend = function (e) {\r\n        mouse.down = false;\r\n        e.preventDefault();\r\n    };\r\n\r\n    canvas.ontouchmove = function (e) {\r\n        mouse.px = mouse.x;\r\n        mouse.py = mouse.y;\r\n        var rect = canvas.getBoundingClientRect();\r\n        mouse.x = e.touches[0].clientX - rect.left,\r\n            mouse.y = e.touches[0].clientY - rect.top,\r\n            e.preventDefault();\r\n    };\r\n\r\n    boundsx = canvas.width - 1;\r\n    boundsy = canvas.height - 1;\r\n\r\n    var gradient = ctx.createLinearGradient((canvas.width / 2) - (cloth_width * spacing) / 2, start_y + cloth_height / 2, (canvas.width + cloth_width * spacing) / 2, start_y + cloth_height / 2);\r\n    gradient.addColorStop(0, \"black\");\r\n    gradient.addColorStop(0.25, \"#2e1c54\");\r\n    gradient.addColorStop(0.5, \"#5661ff\");\r\n    gradient.addColorStop(0.75, \"#4048bc\");\r\n    gradient.addColorStop(1, \"black\");\r\n\r\n\r\n\r\n    ctx.fillStyle = \"#f4fdf2\";\r\n    ctx.strokeStyle = \"#66ffff\";\r\n    ctx.strokeStyle = \"rgba(102, 255, 255, 0.5)\";\r\n    ctx.strokeStyle = gradient;\r\n\r\n\r\n\r\n    cloth = new Cloth(canvas, cloth_width, cloth_height, spacing, start_y);\r\n\r\n    getPositionsForText(cloth);\r\n\r\n    update();\r\n}\r\n\r\n\r\nwindow.onload = function () {\r\n    canvas = document.getElementById('c');\r\n    ctx = canvas.getContext('2d');\r\n\r\n    canvas.width = 560;\r\n    canvas.height = 350;\r\n\r\n    start();\r\n};\r\n\r\n"],"names":["$1e96f37fe61826ec$export$aec1359a0a40a615","p1","p2","spacing","this","length","prototype","resolve","tear_distance","diff_x","x","diff_y","y","dist","Math","sqrt","remove_constraint","diff","px","py","draw","ctx","moveTo","lineTo","$2fbf4e50a91e1d0f$export$baf26146a414f24a","vx","vy","pin_x","pin_y","constraints","constraintUp","constraintLeft","update","delta","mouse","mouse_cut","mouse_influence","gravity","down","button","add_force","nx","ny","i","resolve_constraints","boundsx","boundsy","attach","point","direction","con","push","constraint","splice","indexOf","round","pin","pinx","piny","$5f984a201feb1236$export$b09fb900337259de","p3","p4","$98a2695cfff32a5d$export$48238cda87f9dfdf","canvas","cloth_width","cloth_height","start_y","points","squares","squareLines","start_x","width","p","s","physics_accuracy","beginPath","square","fill","drawLines","stroke","$3fba0bda95caa784$var$text","window","requestAnimFrame","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","callback","setTimeout","$3fba0bda95caa784$var$canvas","$3fba0bda95caa784$var$ctx","$3fba0bda95caa784$var$cloth","$3fba0bda95caa784$var$boundsx","$3fba0bda95caa784$var$boundsy","$3fba0bda95caa784$var$mouse","$3fba0bda95caa784$var$update","clearRect","height","rand","random","shadowBlur","shadowColor","$3fba0bda95caa784$var$start","onmousedown","e","which","rect","getBoundingClientRect","clientX","left","clientY","top","preventDefault","onmouseup","onmousemove","oncontextmenu","onmouseout","ontouchstart","touches","ontouchend","ontouchmove","gradient","createLinearGradient","$3fba0bda95caa784$var$cloth_width","$3fba0bda95caa784$var$start_y","addColorStop","fillStyle","strokeStyle","cloth","font","textWidth","measureText","textPos","fillText","$3fba0bda95caa784$var$cloth_height","data32","Uint32Array","getImageData","data","buffer","approvedSquares","sqLength","j","sq","fillRect","index","$3fba0bda95caa784$var$getPositionsForText","onload","document","getElementById","getContext"],"version":3,"file":"index.91c4450d.js.map"}