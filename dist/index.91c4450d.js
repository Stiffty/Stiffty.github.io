var t=function(t,i,n){this.p1=t,this.p2=i,this.length=n};t.prototype.resolve=function(t){var i=this.p1.x-this.p2.x,n=this.p1.y-this.p2.y,s=Math.sqrt(i*i+n*n);s>t&&this.p1.remove_constraint(this);var e=(this.length-s)/s,o=i*e*.5,h=n*e*.5;this.p1.x+=o,this.p1.y+=h,this.p2.x-=o,this.p2.y-=h},t.prototype.draw=function(t){t.moveTo(this.p1.x,this.p1.y),t.lineTo(this.p2.x,this.p2.y)};var i=function(t,i){this.x=t,this.y=i,this.px=t,this.py=i,this.vx=0,this.vy=0,this.pin_x=null,this.pin_y=null,this.constraints=[],this.constraintUp=null,this.constraintLeft=null};i.prototype.update=function(t,i,n,s,e){if(i.down){var o=this.x-i.x,h=this.y-i.y,r=Math.sqrt(o*o+h*h);1==i.button?r<s&&(this.px=this.x-1.8*(i.x-i.px),this.py=this.y-1.8*(i.y-i.py)):r<n&&(this.constraints=[])}this.add_force(0,e),t*=t;var a=this.x+.99*(this.x-this.px)+this.vx/2*t,p=this.y+.99*(this.y-this.py)+this.vy/2*t;this.px=this.x,this.py=this.y,this.x=a,this.y=p,this.vy=this.vx=0},i.prototype.draw=function(t){if(this.constraints.length)for(var i=this.constraints.length;i--;)this.constraints[i].draw(t)},i.prototype.resolve_constraints=function(t,i,n){if(null!=this.pin_x&&null!=this.pin_y)return this.x=this.pin_x,void(this.y=this.pin_y);for(var s=this.constraints.length;s--;)this.constraints[s].resolve(t);this.x>i?this.x=2*i-this.x:1>this.x&&(this.x=2-this.x),this.y<1?this.y=2-this.y:this.y>n&&(this.y=2*n-this.y)},i.prototype.attach=function(i,n,s){var e=new t(this,i,s);0==n?this.constraintUp=this.constraints.length:this.constraintLeft=this.constraints.length,this.constraints.push(e)},i.prototype.remove_constraint=function(t){this.constraints.splice(this.constraints.indexOf(t),1)},i.prototype.add_force=function(t,i){this.vx+=t,this.vy+=i;var n=400;this.vx=~~(this.vx*n)/n,this.vy=~~(this.vy*n)/n},i.prototype.pin=function(t,i){this.pin_x=t,this.pin_y=i};var n=function(t,i,n,s){this.p1=t,this.p2=i,this.p3=n,this.p4=s};n.prototype.draw=function(t){t.moveTo(this.p4.x,this.p4.y),t.lineTo(this.p3.x,this.p3.y),t.lineTo(this.p2.x,this.p2.y),t.lineTo(this.p1.x,this.p1.y),t.lineTo(this.p4.x,this.p4.y)};var s=function(t,s,e,o,h){this.points=[],this.squares=[],this.squareLines=[];for(var r=t.width/2-s*o/2,a=0;a<=e;a++)for(var p=0;p<=s;p++){var u=new i(r+p*o,h+a*o);if(0!=p&&u.attach(this.points[this.points.length-1],1,o),0==a&&u.pin(u.x,u.y),0!=a&&u.attach(this.points[p+(a-1)*(s+1)],0,o),0!=p&&0!=a){var l=new n(this.points[this.points.length-1],u,this.points[p+(a-1)*(s+1)],this.points[p-1+(a-1)*(s+1)]);this.squares.push(l)}this.points.push(u)}};s.prototype.update=function(t,i,n,s,e,o,h,r){for(var a=i;a--;)for(var p=this.points.length;p--;)this.points[p].resolve_constraints(t,h,r);for(a=this.points.length;a--;)this.points[a].update(.016,n,s,e,o)},s.prototype.draw=function(t){t.beginPath();for(var i=this.squares.length;i--;){let n=this.squares[i];null!==n&&(2==n.p2.constraints.length&&null!=n.p3.constraints[n.p3.constraintLeft]&&null!=n.p1.constraints[n.p1.constraintUp]?n.draw(t):(this.squareLines.push(n),this.squares[i]=null))}t.fill()},s.prototype.drawLines=function(t){t.beginPath();for(var i=this.points.length;i--;)this.points[i].draw(t);t.stroke()};var e="STIFFTY";window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)};var o,h,r,a,p,u={down:!1,button:1,x:0,y:0,px:0,py:0};function l(){h.clearRect(0,0,o.width,o.height),r.update(20,10,u,5,10,1200,a,p);let t=10*Math.random();h.shadowBlur=10+t,h.shadowColor="white",r.draw(h),h.shadowBlur=0,r.drawLines(h),requestAnimFrame(l)}function c(){o.onmousedown=function(t){u.button=t.which,u.px=u.x,u.py=u.y;var i=o.getBoundingClientRect();u.x=t.clientX-i.left,u.y=t.clientY-i.top,u.down=!0,t.preventDefault()},o.onmouseup=function(t){u.down=!1,t.preventDefault()},o.onmousemove=function(t){u.px=u.x,u.py=u.y;var i=o.getBoundingClientRect();u.x=t.clientX-i.left,u.y=t.clientY-i.top,t.preventDefault()},o.oncontextmenu=function(t){t.preventDefault()},o.onmouseout=function(t){u.down=!1,t.preventDefault()},o.ontouchstart=function(t){u.button=1,u.px=u.x,u.py=u.y;var i=o.getBoundingClientRect();u.x=t.touches[0].clientX-i.left,u.y=t.touches[0].clientY-i.top,u.down=!0,t.preventDefault()},o.ontouchend=function(t){u.down=!1,t.preventDefault()},o.ontouchmove=function(t){u.px=u.x,u.py=u.y;var i=o.getBoundingClientRect();u.x=t.touches[0].clientX-i.left,u.y=t.touches[0].clientY-i.top,t.preventDefault()},a=o.width-1,p=o.height-1;var t=h.createLinearGradient(o.width/2-215,29,(o.width+430)/2,29);t.addColorStop(0,"black"),t.addColorStop(.25,"#2e1c54"),t.addColorStop(.5,"#5661ff"),t.addColorStop(.75,"#4048bc"),t.addColorStop(1,"black"),h.fillStyle="#f4fdf2",h.strokeStyle="#66ffff",h.strokeStyle="rgba(102, 255, 255, 0.5)",h.strokeStyle=t,function(t){h.clearRect(0,0,o.width,o.height),h.font="bold 100px serif";let i=h.measureText(e),n=o.width/2-i.width/2;h.fillText(e,n,100);let s=new Uint32Array(h.getImageData(0,0,o.width,o.height).data.buffer),r=[],a=s.length;for(let i=0;i<a;i++)if(4278190080&s[i]){let n=t.squares.length;for(let s=0;s<n;s++){var p=t.squares[s];p.p2.x==i%o.width&&p.p2.y==(i/o.width|0)&&r.push(t.squares[s])}h.fillRect(i%o.width,i/o.width|0,1,1)}a=t.squares.length;for(let i=0;i<a;i++)-1===r.indexOf(t.squares[i])&&t.squareLines.push(t.squares[i]);t.squares=r}(r=new s(o,86,18,5,20)),l()}window.onload=function(){o=document.getElementById("c"),h=o.getContext("2d"),o.width=560,o.height=350,c()};
//# sourceMappingURL=index.91c4450d.js.map
